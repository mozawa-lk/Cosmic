# Cosmic Crush オマージュゲーム仕様書

## 1. 基本構造

- ファイル構成: `App.js` 1ファイルに完結。
- 使用ライブラリ: `expo-haptics` (吸収時の振動用) をインポート。
- 画面設定: 黒背景（`#000000`）、ステータスバー非表示。

## 2. オブジェクト仕様（チープ・レトロ・スタイル）

### 自機（Player）
- 初期サイズ: 半径15
- 見た目: サイズに応じて変化。
  - 半径 < 50: 灰色（岩）
  - 半径 < 120: 青（惑星）
  - 半径 120以上: オレンジ〜赤のグラデーション（恒星）

### エサ（Star）
- 画面内に常時20〜30個存在させる。画面外に出たら反対側から出すか、再生成。
- サイズ: ランダム（半径5〜自機の2倍まで）。

## 3. 物理・操作ロジック

- 操作: 画面をタッチしている間、その方向に「加速度」を与える（速度に微小値を加算）。指を離しても慣性で少し滑るようにする（摩擦係数 0.98程度）。
- 万有引力: 全てのオブジェクト間で計算。
  - 公式：加速度 = G * (相手の質量 / 距離の2乗)
  - プレイヤーが自分より大きい星に近づくと、強烈に吸い寄せられる恐怖感を演出。
- 境界: 画面端はループ（右から出たら左から出る）させる。

## 4. 当たり判定と演出

### 吸収
- 条件: 自分より小さい星に接触。
- 判定: 2つの円の距離 < (自分の半径 + 相手の半径)。
- 効果: 自分の半径を 相手の半径 * 0.1 加算。
- 振動: `Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light)` （軽い振動）を実行し、一瞬スマホを震わせる。

### ゲームオーバー
- 条件: 自分より大きい星に接触。
- 演出: 画面を赤くフラッシュさせ、「RETRY」ボタンを表示。振動：`Haptics.notificationAsync(Haptics.NotificationFeedbackType.Error)` （強い連続振動）。

## 5. UI（チープなフォント）

- 左上に `SIZE: XXX MASS: XXX` を白の等幅フォント、またはドット絵風フォントで表示。

## 6. ゲーム状態（State）の管理

以下の3つの画面状態を切り替えられるようにする。

- `START`: スタート画面
- `PLAYING`: ゲーム本編
- `GAMEOVER`: ゲームオーバー画面

## 7. スタート画面（START）の仕様

- デザイン: 黒背景。中央に大きく「COSMIC CRUSH」と白いドット絵風フォントで表示。
- 演出: 背景で小さな星（エサ）がふわふわと漂っている。
- ボタン: 「START GAME」ボタンを中央に配置。
- ハイスコア: 過去の最大サイズを保存・表示（`AsyncStorage`を使用）。

## 8. ゲームオーバー画面（GAMEOVER）の仕様

- 演出: 自機が赤く光って消滅。画面全体に「ABSORBED（吸収された）」と大きく表示。
- スコア: 今回到達した「SIZE」を表示。
- ボタン: 「TRY AGAIN」ボタンを表示し、クリックで即座に `PLAYING` 状態へリセット。

## 9. 追加のこだわり

### カメラのズーム

自機が大きくなるにつれて、相対的に「エサ」や「背景のグリッド」が小さくなっていく（ズームアウト）演出を入れると、成長感が劇的に増します。
